private int next(int index) {
    return (index + 1) & (mask);
}