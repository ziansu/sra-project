private float clamp(float f) {
    return f > 1 ? 1 : f < 0 ? 0 : f;
}